<!DOCTYPE html>
<html lang="en">
    <style>
        body {
            background: #ccc;
        }
    </style>
	<body>
    <div id="container"><br /><br /><br /><br /><br />Generating world...</div>
    <div style="position: fixed; top: 3%; width:95%; ">
        <div style="float: right; ">
                <span id='text1' style="display:inline-block;height:30px;width:100px;color:#00aa00;"></span>
        </div>
        <div style="float: right; ">
                <span id='text2' style="display:inline-block;height:30px;width:100px;color:#000000;"></span>
        </div>
    </div>
    <script src="r73/three.js"></script>
    <script src="r73/OrbitControls.js"></script>
    <script src="r73/Mirror.js"></script>
    <script src="myCubeCamera.js"></script>
    <script src="files.js"></script>
    <script src="utils.js"></script>
    <script id="vs" type="x-shader/x-vertex">
        varying vec2 vUv; 
        void main()
        {
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0 );
            gl_Position = projectionMatrix * mvPosition;
            vUv = uv;
        }
    </script>

    <script id="fs" type="x-shader/x-fragment">
        uniform sampler2D iChannel0;
        varying vec2 vUv;  
        void main() {
            vec2 uv = vUv;
            vec4 px0 = texture2D( iChannel0,  uv);
            px0.a = 0.8;

            gl_FragColor =  px0;
        }

    </script>
        <script>

    var _container, render_stats, physics_stats;
    var _camera, _controls, _scene, _renderer;
    var _boxPivotPoint, textElement, _shaderMaterial;
    _textElement = document.getElementById('text1');
    _textElement2 = document.getElementById('text2');
    var _scene = new THREE.Scene();

    _container = document.getElementById( 'container' );

    _renderer =  new THREE.WebGLRenderer({antialias: true, alpha: true});
    _renderer.setSize( window.innerWidth, window.innerHeight );
    document.getElementById( 'container' ).innerHTML = "";
    _container.appendChild( _renderer.domElement );

    _camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 20000 );
    _camera.position.x = 0; _camera.position.y = 20; _camera.position.z = 109;

    _controls = new THREE.OrbitControls( _camera, _container.domElement );

    var material = new THREE.ShaderMaterial( {
        uniforms: {
            iChannel0:  { type: 't', value: 0 },
            iChannel1:  { type: 't', value: 0 },
        },
        vertexShader: document.getElementById( 'vs' ).textContent,
        fragmentShader: document.getElementById( 'fs' ).textContent,
        transparent: true, opacity: .5
    } );
    // var material = new THREE.MeshNormalMaterial();
    var pathToTexture = "P1040951";
    texture = THREE.ImageUtils.loadTexture("textures/" + pathToTexture + ".JPG");
    material.uniforms.iChannel0 =  { type: 't', value: texture }; 

    var plane = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), material);
    plane.material.side = THREE.DoubleSide;
    plane.position.z = -1;
    plane.rotation.y = Math.PI ;
    plane.rotation.z = Math.PI ;
    _scene.add(plane);

    var material = new THREE.ShaderMaterial( {
        uniforms: {
            iChannel0:  { type: 't', value: 0 },
            iChannel1:  { type: 't', value: 0 },
        },
        vertexShader: document.getElementById( 'vs' ).textContent,
        fragmentShader: document.getElementById( 'fs' ).textContent,
        transparent: true, opacity: .5
    } );
    var pathToTexture = "P1040952";
    texture = THREE.ImageUtils.loadTexture("textures/" + pathToTexture + ".JPG");
    material.uniforms.iChannel0 =  { type: 't', value: texture }; 
    var plane = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), material);
    plane.material.side = THREE.DoubleSide;

    plane.rotation.y = Math.PI ;
    plane.rotation.z = Math.PI ;
    _scene.add(plane);
    // loadSkyDome(_scene, 'textures.old/louis.jpg');

    var clock = new THREE.Clock();
    _renderer.render( _scene, _camera );
    requestAnimationFrame( render );

    function render() {
        requestAnimationFrame( render );
        // _controls.update( clock.getDelta() );

        // rotateCameraY(_camera, Math.PI/128);
        _camera.lookAt(new THREE.Vector3(0,0,0));
        _renderer.render( _scene, _camera );

        // cube.visible = false;
        // _cubeCamera.updateCubeMap(_renderer, _scene);        
        // cube.visible = true;
    }
</script>
	</body>
</html>
